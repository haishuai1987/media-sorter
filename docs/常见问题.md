# 常见问题 FAQ

## 📋 目录

- [安装和部署](#安装和部署)
- [使用问题](#使用问题)
- [功能问题](#功能问题)
- [性能问题](#性能问题)
- [错误处理](#错误处理)

---

## 安装和部署

### Q: 支持哪些 Python 版本？
**A**: Python 3.7+ 都支持，推荐使用 Python 3.9+

### Q: 如何安装依赖？
**A**: 
```bash
pip install -r requirements.txt
pip install -r requirements-v2.8.0.txt
```

### Q: 端口 8090 被占用怎么办？
**A**: 使用其他端口启动：
```bash
python app_v2.py --port 8091
# 或
PORT=8091 python app_v2.py
```

### Q: 如何在后台运行？
**A**: 
```bash
# Linux/macOS
nohup python app_v2.py > app.log 2>&1 &

# 或使用 systemd 服务（推荐）
sudo systemctl start media-renamer
```

### Q: Docker 部署失败怎么办？
**A**: 
1. 检查 Docker 是否正常运行
2. 查看日志：`docker-compose logs -f`
3. 重新构建：`docker-compose build --no-cache`

### Q: 如何配置 HTTPS？
**A**: 使用 Nginx 反向代理 + Let's Encrypt 证书，详见[部署手册](./部署手册.md#配置-ssl)

---

## 使用问题

### Q: 如何开始使用？
**A**: 
1. 启动应用
2. 访问 http://localhost:8090
3. 在"批量处理"页面输入文件名
4. 点击"预览"查看结果
5. 点击"开始处理"执行

### Q: 支持哪些文件格式？
**A**: 支持所有常见视频格式：
- mkv, mp4, avi, mov, wmv
- flv, m4v, ts, m2ts
- 以及其他视频格式

### Q: 如何批量处理文件？
**A**: 
1. 在文本框中输入文件名（每行一个）
2. 或拖拽文件到拖拽区域
3. 或导入 TXT/CSV 文件
4. 选择模板并处理

### Q: 如何调整文件顺序？
**A**: 
1. 点击"🔄 切换视图"
2. 切换到列表模式
3. 拖拽文件项调整顺序

### Q: 如何保存常用配置？
**A**: 
1. 在"批量处理"页面设置好选项
2. 点击"配置管理"标签
3. 输入配置名称
4. 点击"添加配置"

### Q: 如何查看处理历史？
**A**: 点击"历史记录"标签查看所有处理记录

### Q: 如何导出处理结果？
**A**: 点击"📤 导出结果"按钮，保存为 TXT 或 CSV 文件

---

## 功能问题

### Q: 识别不准确怎么办？
**A**: 
1. 检查文件名格式是否规范
2. 使用"文件识别"功能测试
3. 添加自定义识别词
4. 调整文件名格式

### Q: 如何自定义命名模板？
**A**: 
1. 点击"模板管理"标签
2. 输入模板名称和格式
3. 使用变量如 `{title}`, `{year}` 等
4. 点击"添加模板"

### Q: 支持哪些模板变量？
**A**: 
- `{title}` - 标题
- `{year}` - 年份
- `{season}` - 季数
- `{episode}` - 集数
- `{resolution}` - 分辨率
- `{video_codec}` - 视频编码
- `{audio_codec}` - 音频编码
- `{source}` - 来源
- `{ext}` - 扩展名

### Q: 如何批量编辑文件名？
**A**: 
1. 点击"批量编辑"标签
2. 选择编辑操作（添加前缀/后缀、替换、删除等）
3. 填写参数
4. 预览并应用

### Q: 如何使用正则表达式？
**A**: 
1. 在"批量编辑"中选择"正则替换"
2. 输入正则表达式
3. 输入替换文本
4. 预览结果

### Q: 主题如何切换？
**A**: 
- **自动模式**（默认）：自动跟随系统主题
- **手动模式**：左键点击 🌙/☀️ 按钮切换
- **恢复自动**：右键点击 🌙/☀️ 按钮

### Q: 如何切换语言？
**A**: 点击 🌍 按钮在中英文间切换

### Q: 快捷键有哪些？
**A**: 按 `Ctrl+/` 查看完整快捷键列表

常用快捷键：
- `Ctrl+P` - 预览
- `Ctrl+Enter` - 开始处理
- `Ctrl+K` - 清空
- `Ctrl+T` - 切换主题
- `Ctrl+L` - 切换语言

---

## 性能问题

### Q: 处理速度慢怎么办？
**A**: 
1. 减少单次处理文件数量（建议50-100个）
2. 使用队列管理
3. 关闭不必要的功能
4. 升级硬件配置

### Q: 内存占用高怎么办？
**A**: 
1. 减少并发处理数量
2. 定期清理历史记录
3. 重启应用释放内存

### Q: 如何提高识别准确度？
**A**: 
1. 使用规范的文件名格式
2. 添加自定义识别词
3. 使用详细的命名模板

### Q: 批量处理时卡顿怎么办？
**A**: 
1. 检查网络连接
2. 减少单次处理数量
3. 使用本地部署而非远程访问

---

## 错误处理

### Q: 启动失败怎么办？
**A**: 
1. 检查 Python 版本
2. 检查依赖是否安装完整
3. 查看错误日志
4. 检查端口是否被占用

### Q: 页面无法访问怎么办？
**A**: 
1. 检查应用是否正常运行
2. 检查防火墙设置
3. 检查端口配置
4. 尝试使用 127.0.0.1 而非 localhost

### Q: WebSocket 连接失败怎么办？
**A**: 
1. 检查浏览器是否支持 WebSocket
2. 检查 Nginx 配置（如果使用反向代理）
3. 检查防火墙设置
4. 刷新页面重新连接

### Q: 进度条不显示怎么办？
**A**: 
1. 检查 WebSocket 连接
2. 刷新页面
3. 查看浏览器控制台错误
4. 检查网络连接

### Q: 文件处理失败怎么办？
**A**: 
1. 查看错误信息
2. 检查文件名格式
3. 使用"文件识别"功能测试
4. 查看历史记录中的错误详情

### Q: 配置导入失败怎么办？
**A**: 
1. 检查 JSON 文件格式
2. 确保文件编码为 UTF-8
3. 检查文件内容是否完整

### Q: 历史记录丢失怎么办？
**A**: 
1. 检查 `data/history.db` 文件是否存在
2. 检查文件权限
3. 从备份恢复

### Q: 主题切换不生效怎么办？
**A**: 
1. 清除浏览器缓存
2. 刷新页面（Ctrl+Shift+R）
3. 检查 LocalStorage 是否被禁用

### Q: 语言切换不生效怎么办？
**A**: 
1. 刷新页面
2. 清除浏览器缓存
3. 检查 LocalStorage

---

## 数据和备份

### Q: 如何备份数据？
**A**: 
```bash
# 备份整个 data 目录
tar -czf backup-$(date +%Y%m%d).tar.gz data/
```

### Q: 如何恢复数据？
**A**: 
```bash
# 解压备份文件
tar -xzf backup-20231023.tar.gz
```

### Q: 数据存储在哪里？
**A**: 
- 配置文件：`data/configs/configs.json`
- 历史记录：`data/history.db`

### Q: 如何清理历史记录？
**A**: 
1. 在"历史记录"页面点击"清空历史"
2. 或直接删除 `data/history.db` 文件

### Q: 如何迁移数据？
**A**: 
1. 备份 `data/` 目录
2. 在新环境中恢复
3. 重启应用

---

## 高级问题

### Q: 如何使用 API？
**A**: 查看 [API 文档](./API文档.md)

### Q: 如何二次开发？
**A**: 查看 [开发者指南](./开发者指南.md)

### Q: 如何贡献代码？
**A**: 
1. Fork 仓库
2. 创建分支
3. 提交 Pull Request

### Q: 如何报告 Bug？
**A**: 在 GitHub 提交 Issue：https://github.com/haishuai1987/media-sorter/issues

### Q: 如何获取技术支持？
**A**: 
1. 查看文档
2. 搜索已有 Issue
3. 提交新 Issue
4. 联系维护者

---

## 其他问题

### Q: 是否支持移动端？
**A**: Web UI 支持响应式设计，可以在移动端浏览器访问

### Q: 是否支持多用户？
**A**: 当前版本不支持多用户，建议每个用户独立部署

### Q: 是否支持云存储？
**A**: 当前版本主要针对本地文件，云存储支持在规划中

### Q: 是否开源？
**A**: 是的，项目完全开源，使用 MIT 许可证

### Q: 如何更新到最新版本？
**A**: 
```bash
git pull origin main
pip install -r requirements.txt -U
pip install -r requirements-v2.8.0.txt -U
```

---

## 📚 相关文档

- [快速开始](./快速开始.md) - 快速上手指南
- [使用手册](./使用手册.md) - 完整功能说明
- [部署手册](./部署手册.md) - 部署指南
- [API 文档](./API文档.md) - API 接口说明
- [开发者指南](./开发者指南.md) - 开发文档

---

## 🆘 仍然需要帮助？

如果以上内容无法解决你的问题：

1. 查看 [GitHub Issues](https://github.com/haishuai1987/media-sorter/issues)
2. 提交新 Issue
3. 联系维护者

---

**希望这些解答能帮助到你！** 🎉
