# 快速开始指南

## 🚀 5分钟快速部署

### 方法1: 自动安装（推荐）

```bash
# 1. 下载项目
git clone https://github.com/your-repo/media-renamer.git
cd media-renamer

# 2. 运行安装脚本
chmod +x install.sh
./install.sh

# 3. 启动服务
python3 app.py

# 4. 访问应用
# 浏览器打开: http://localhost:8090
```

### 方法2: Docker部署

```bash
# 1. 修改docker-compose.yml中的路径
nano docker-compose.yml

# 2. 启动容器
docker-compose up -d

# 3. 访问应用
# 浏览器打开: http://localhost:8090
```

---

## 📋 系统要求

### 最低要求
- **Python**: 3.6+
- **内存**: 512MB
- **磁盘**: 100MB（应用本身）
- **网络**: 局域网访问

### 推荐配置
- **Python**: 3.9+
- **内存**: 1GB+
- **磁盘**: 根据媒体库大小
- **网络**: 千兆局域网

---

## 🎯 首次使用

### 1. 配置API密钥（重要）

点击 **⚙️ 设置** 按钮，配置：

```
TMDB API Key: 你的TMDB API密钥
TMDB代理: http://your-proxy:port（如需要）
豆瓣Cookie: 你的豆瓣Cookie
```

**获取方法**：
- TMDB API Key: https://www.themoviedb.org/settings/api
- 豆瓣Cookie: 登录豆瓣 → F12 → Network → 复制Cookie

### 2. 配置路径

配置三个路径：

```
待整理目录: /path/to/待整理
电影输出目录: /path/to/电影
剧集输出目录: /path/to/剧集
```

### 3. 选择冲突策略

- **自动比较**: 智能比较文件质量（推荐）
- **跳过**: 保留旧文件
- **替换**: 用新文件替换
- **保留两个**: 添加版本号

### 4. 开始整理

点击 **🚀 一键整理入库** 按钮

### 5. 查看进度

点击 **📊 整理详情** 查看实时进度

---

## 🔧 常见配置

### NAS系统路径

#### Synology
```
待整理: /volume1/media/待整理
电影: /volume1/media/电影
剧集: /volume1/media/剧集
```

#### QNAP
```
待整理: /share/media/待整理
电影: /share/media/电影
剧集: /share/media/剧集
```

#### TrueNAS
```
待整理: /mnt/pool/media/待整理
电影: /mnt/pool/media/电影
剧集: /mnt/pool/media/剧集
```

#### Unraid
```
待整理: /mnt/user/media/待整理
电影: /mnt/user/media/电影
剧集: /mnt/user/media/剧集
```

---

## 📱 访问方式

### 本地访问
```
http://localhost:8090
```

### 局域网访问
```
http://你的IP:8090
```

### 查找IP地址
```bash
# Linux/Mac
hostname -I

# Windows
ipconfig
```

---

## 🎬 处理流程

系统会自动完成8个步骤：

1. **📂 智能扫描**: 扫描待整理目录
2. **🌐 中文标题识别**: 通过豆瓣/TMDB获取中文标题
3. **🎯 智能去重**: 识别重复文件，保留最佳版本
4. **📝 标准化重命名**: 按规范格式重命名
5. **📁 智能分类**: 自动分类（动画、华语、外语等）
6. **🚚 自动移动**: 移动到目标目录
7. **⚔️ 冲突处理**: 处理同名文件
8. **🧹 自动清理**: 清理跳过的文件和空文件夹

---

## 💡 使用技巧

### 1. 首次使用
- 先用少量文件测试（5-10个）
- 确认命名规则符合预期
- 检查分类是否正确

### 2. 日常使用
- 新文件放入待整理目录
- 点击按钮自动处理
- 使用"跳过"策略避免重复处理

### 3. 批量处理
- 建议每次50-100个文件
- 大文件（>10GB）单独处理
- 可以多次运行

### 4. 查看详情
- 实时查看处理进度
- 查看详细日志
- 发现问题及时停止

---

## ⚙️ 高级配置

### 修改端口
编辑 `app.py`:
```python
PORT = 8090  # 改为其他端口
```

### 网络优化
编辑 `app.py`:
```python
NETWORK_RETRY_COUNT = 3  # 重试次数
NETWORK_RETRY_DELAY = 2  # 重试延迟
NETWORK_OP_DELAY = 1.0   # 操作延迟
```

### TMDB配置
编辑 `app.py`:
```python
TMDB_API_KEY = 'your-api-key'
TMDB_PROXY = 'http://proxy:port'  # 可选
```

### 豆瓣配置
编辑 `app.py`:
```python
DOUBAN_COOKIE = 'your-cookie'
```

---

## 🐛 故障排查

### 问题1: 无法访问
```bash
# 检查服务是否运行
ps aux | grep app.py

# 检查端口
netstat -tuln | grep 8090

# 检查防火墙
sudo ufw status
```

### 问题2: 权限错误
```bash
# 检查权限
ls -la /path/to/media

# 修改权限
sudo chmod -R 755 /path/to/media
```

### 问题3: Python版本
```bash
# 检查版本
python3 --version

# 需要 >= 3.6
```

### 问题4: 网络超时
- 增加重试次数
- 增加延迟时间
- 检查网络连接

---

## 📚 更多文档

- **README.md**: 完整功能说明
- **NAS部署指南.md**: NAS系统部署
- **Linux_NAS优化方案.md**: 优化详情
- **Linux_NAS优化总结.md**: 优化总结

---

## 🆘 获取帮助

### 查看日志
```bash
# 直接运行时
python3 app.py

# systemd服务
sudo journalctl -u media-renamer -f

# Docker
docker-compose logs -f
```

### 常见问题
1. 检查Python版本
2. 检查路径权限
3. 检查网络连接
4. 查看错误日志

---

## ✅ 验证安装

### 1. 检查Python
```bash
python3 --version
# 应该显示 3.6 或更高
```

### 2. 检查文件
```bash
ls -la
# 应该看到 app.py 和 index.html
```

### 3. 测试运行
```bash
python3 app.py
# 应该显示启动信息
```

### 4. 测试访问
```bash
curl http://localhost:8090
# 应该返回HTML内容
```

---

## 🎉 开始使用

一切就绪！现在你可以：

1. ✅ 访问 http://localhost:8090
2. ✅ 配置三个路径
3. ✅ 选择冲突策略
4. ✅ 点击"一键整理入库"
5. ✅ 查看"整理详情"监控进度

享受自动化的媒体库管理吧！🎬
