# ðŸš€ å¿«é€Ÿéƒ¨ç½²æŒ‡å—

## ðŸ“¦ å‡†å¤‡å·¥ä½œ

**éœ€è¦çš„æ–‡ä»¶ï¼š**
- `app.py` - åŽç«¯æœåŠ¡å™¨
- `index.html` - å‰ç«¯é¡µé¢
- `install.sh` - ä¸€é”®éƒ¨ç½²è„šæœ¬ï¼ˆå¯é€‰ï¼‰

**æ–‡ä»¶ä½ç½®ï¼š** `E:\media-renamer`

---

## ðŸŽ¯ ä¸€é”®éƒ¨ç½²ï¼ˆæŽ¨èï¼‰

### ç¬¬1æ­¥ï¼šä¸Šä¼ æ–‡ä»¶åˆ°é£žç‰›OS

åœ¨Windows PowerShellä¸­æ‰§è¡Œï¼š

```powershell
# è¿›å…¥é¡¹ç›®ç›®å½•
cd E:\media-renamer

# ä¸Šä¼ æ–‡ä»¶ï¼ˆæ›¿æ¢ä¸ºä½ çš„å®žé™…IPåœ°å€ï¼‰
scp app.py index.html install.sh root@192.168.1.100:/root/
```

è¾“å…¥rootå¯†ç åŽç­‰å¾…ä¸Šä¼ å®Œæˆã€‚

### ç¬¬2æ­¥ï¼šSSHç™»å½•é£žç‰›OS

```powershell
ssh root@192.168.1.100
```

### ç¬¬3æ­¥ï¼šè¿è¡Œéƒ¨ç½²è„šæœ¬

```bash
# åˆ›å»ºç›®å½•å¹¶ç§»åŠ¨æ–‡ä»¶
mkdir -p /root/media-manager
mv /root/app.py /root/index.html /root/install.sh /root/media-manager/

# è¿›å…¥ç›®å½•
cd /root/media-manager

# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x install.sh

# è¿è¡Œéƒ¨ç½²è„šæœ¬
./install.sh
```

### ç¬¬4æ­¥ï¼šå®Œæˆï¼

çœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯è¡¨ç¤ºéƒ¨ç½²æˆåŠŸï¼š

```
==================================================
ðŸŽ‰ éƒ¨ç½²å®Œæˆï¼
==================================================

âœ… æœåŠ¡çŠ¶æ€ï¼š
   â€¢ å½“å‰çŠ¶æ€: è¿è¡Œä¸­
   â€¢ å¼€æœºè‡ªå¯: å·²å¯ç”¨
   â€¢ å´©æºƒé‡å¯: å·²å¯ç”¨ï¼ˆ10ç§’åŽè‡ªåŠ¨é‡å¯ï¼‰

ðŸ“± è®¿é—®åœ°å€ï¼š
   http://localhost:8090
   http://192.168.1.100:8090

ðŸ“‹ å¸¸ç”¨å‘½ä»¤ï¼š
   æŸ¥çœ‹çŠ¶æ€: systemctl status media-manager
   æŸ¥çœ‹æ—¥å¿—: journalctl -u media-manager -f
   é‡å¯æœåŠ¡: systemctl restart media-manager
   åœæ­¢æœåŠ¡: systemctl stop media-manager
   ç¦ç”¨è‡ªå¯: systemctl disable media-manager

ðŸ“‚ æ‰«æè·¯å¾„: /vol02/1000-1-b23abde7/å¾…æ•´ç†

ðŸ’¡ æç¤ºï¼š
   æœåŠ¡å·²è®¾ç½®ä¸ºåŽå°å¸¸é©»è¿è¡Œ
   ç³»ç»Ÿé‡å¯åŽä¼šè‡ªåŠ¨å¯åŠ¨
   å¦‚æžœå´©æºƒä¼šåœ¨10ç§’åŽè‡ªåŠ¨é‡å¯

==================================================
```

---

## ðŸ”§ æ‰‹åŠ¨éƒ¨ç½²ï¼ˆä¸ä½¿ç”¨è„šæœ¬ï¼‰

### ç¬¬1æ­¥ï¼šä¸Šä¼ æ–‡ä»¶

```powershell
cd E:\media-renamer
scp app.py index.html root@192.168.1.100:/root/
```

### ç¬¬2æ­¥ï¼šSSHç™»å½•

```bash
ssh root@192.168.1.100
```

### ç¬¬3æ­¥ï¼šåˆ›å»ºç›®å½•

```bash
mkdir -p /root/media-manager
mv /root/app.py /root/index.html /root/media-manager/
cd /root/media-manager
```

### ç¬¬4æ­¥ï¼šåˆ›å»ºsystemdæœåŠ¡

```bash
cat > /etc/systemd/system/media-manager.service << 'EOF'
[Unit]
Description=Media Manager Service V1
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/root/media-manager
ExecStart=/usr/bin/python3 /root/media-manager/app.py
Restart=always
RestartSec=10
StandardOutput=journal
StandardError=journal

[Install]
WantedBy=multi-user.target
EOF
```

### ç¬¬5æ­¥ï¼šå¯åŠ¨æœåŠ¡

```bash
# é‡è½½systemdé…ç½®
systemctl daemon-reload

# å¯åŠ¨æœåŠ¡
systemctl start media-manager

# è®¾ç½®å¼€æœºè‡ªå¯
systemctl enable media-manager

# æŸ¥çœ‹çŠ¶æ€
systemctl status media-manager
```

---

## ðŸ“‹ æœåŠ¡ç®¡ç†å‘½ä»¤

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€
```bash
systemctl status media-manager
```

### æŸ¥çœ‹å®žæ—¶æ—¥å¿—
```bash
journalctl -u media-manager -f
```

### æŸ¥çœ‹æœ€è¿‘50æ¡æ—¥å¿—
```bash
journalctl -u media-manager -n 50
```

### é‡å¯æœåŠ¡
```bash
systemctl restart media-manager
```

### åœæ­¢æœåŠ¡
```bash
systemctl stop media-manager
```

### å¯åŠ¨æœåŠ¡
```bash
systemctl start media-manager
```

### ç¦ç”¨å¼€æœºè‡ªå¯
```bash
systemctl disable media-manager
```

### å¯ç”¨å¼€æœºè‡ªå¯
```bash
systemctl enable media-manager
```

---

## âœ… æœåŠ¡ç‰¹æ€§

### ðŸ”„ è‡ªåŠ¨é‡å¯
- å¦‚æžœç¨‹åºå´©æºƒï¼Œ10ç§’åŽè‡ªåŠ¨é‡å¯
- é…ç½®é¡¹ï¼š`Restart=always` å’Œ `RestartSec=10`

### ðŸš€ å¼€æœºè‡ªå¯
- ç³»ç»Ÿå¯åŠ¨åŽè‡ªåŠ¨è¿è¡ŒæœåŠ¡
- é…ç½®é¡¹ï¼š`WantedBy=multi-user.target`

### ðŸ“ æ—¥å¿—è®°å½•
- æ‰€æœ‰è¾“å‡ºè®°å½•åˆ°ç³»ç»Ÿæ—¥å¿—
- ä½¿ç”¨ `journalctl` æŸ¥çœ‹æ—¥å¿—

### ðŸ”’ æƒé™ç®¡ç†
- ä»¥rootç”¨æˆ·è¿è¡Œ
- å¯ä»¥è®¿é—®æ‰€æœ‰æ–‡ä»¶å¤¹

---

## ðŸ”„ æ›´æ–°ç¨‹åº

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨è„šæœ¬æ›´æ–°

```bash
# åœæ­¢æœåŠ¡
systemctl stop media-manager

# ä¸Šä¼ æ–°æ–‡ä»¶ï¼ˆåœ¨Windowsä¸Šæ‰§è¡Œï¼‰
cd E:\media-renamer
scp app.py index.html root@192.168.1.100:/root/media-manager/

# å¯åŠ¨æœåŠ¡ï¼ˆåœ¨é£žç‰›OSä¸Šæ‰§è¡Œï¼‰
systemctl start media-manager
```

### æ–¹æ³•äºŒï¼šä¸åœæœºæ›´æ–°

```bash
# ä¸Šä¼ æ–°æ–‡ä»¶
scp app.py index.html root@192.168.1.100:/root/media-manager/

# é‡å¯æœåŠ¡
ssh root@192.168.1.100 "systemctl restart media-manager"
```

---

## ðŸ› æ•…éšœæŽ’é™¤

### æœåŠ¡æ— æ³•å¯åŠ¨

```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯
journalctl -u media-manager -n 50

# æ‰‹åŠ¨è¿è¡ŒæŸ¥çœ‹é”™è¯¯
cd /root/media-manager
python3 app.py
```

### ç«¯å£è¢«å ç”¨

```bash
# æŸ¥çœ‹8090ç«¯å£å ç”¨
netstat -tulpn | grep 8090

# ä¿®æ”¹ç«¯å£ï¼ˆç¼–è¾‘app.pyï¼‰
nano /root/media-manager/app.py
# ä¿®æ”¹ PORT = 8090 ä¸ºå…¶ä»–ç«¯å£
```

### æƒé™é—®é¢˜

```bash
# æ£€æŸ¥æ–‡ä»¶æƒé™
ls -la /root/media-manager/

# ä¿®å¤æƒé™
chmod 644 /root/media-manager/app.py
chmod 644 /root/media-manager/index.html
```

### æœåŠ¡çŠ¶æ€å¼‚å¸¸

```bash
# é‡è½½systemdé…ç½®
systemctl daemon-reload

# é‡å¯æœåŠ¡
systemctl restart media-manager

# æŸ¥çœ‹çŠ¶æ€
systemctl status media-manager
```

---

## ðŸ“ž éªŒè¯éƒ¨ç½²

### 1. æ£€æŸ¥æœåŠ¡çŠ¶æ€
```bash
systemctl status media-manager
```

åº”è¯¥æ˜¾ç¤ºï¼š`Active: active (running)`

### 2. æ£€æŸ¥ç«¯å£ç›‘å¬
```bash
netstat -tulpn | grep 8090
```

åº”è¯¥æ˜¾ç¤ºï¼š`python3` åœ¨ç›‘å¬ `8090` ç«¯å£

### 3. è®¿é—®Webç•Œé¢
åœ¨æµè§ˆå™¨æ‰“å¼€ï¼š`http://ä½ çš„NAS_IP:8090`

### 4. æµ‹è¯•é‡å¯
```bash
# é‡å¯ç³»ç»Ÿ
reboot

# é‡å¯åŽæ£€æŸ¥æœåŠ¡
systemctl status media-manager
```

æœåŠ¡åº”è¯¥è‡ªåŠ¨è¿è¡Œã€‚

---

## ðŸ’¡ æœ€ä½³å®žè·µ

1. **å®šæœŸæŸ¥çœ‹æ—¥å¿—**
   ```bash
   journalctl -u media-manager -f
   ```

2. **å¤‡ä»½é…ç½®**
   ```bash
   cp /etc/systemd/system/media-manager.service /root/media-manager.service.backup
   ```

3. **ç›‘æŽ§æœåŠ¡çŠ¶æ€**
   ```bash
   # æ·»åŠ åˆ°crontabï¼Œæ¯å°æ—¶æ£€æŸ¥ä¸€æ¬¡
   0 * * * * systemctl is-active media-manager || systemctl restart media-manager
   ```

4. **æ—¥å¿—è½®è½¬**
   ```bash
   # é™åˆ¶æ—¥å¿—å¤§å°
   journalctl --vacuum-size=100M
   ```

---

## ðŸŽ‰ éƒ¨ç½²å®Œæˆæ£€æŸ¥æ¸…å•

- [ ] æ–‡ä»¶å·²ä¸Šä¼ åˆ° `/root/media-manager/`
- [ ] systemdæœåŠ¡å·²åˆ›å»º
- [ ] æœåŠ¡çŠ¶æ€ä¸º `active (running)`
- [ ] å¼€æœºè‡ªå¯å·²å¯ç”¨
- [ ] å¯ä»¥è®¿é—®Webç•Œé¢ `http://NAS_IP:8090`
- [ ] æµ‹è¯•é‡å¯åŽæœåŠ¡è‡ªåŠ¨å¯åŠ¨
- [ ] æ—¥å¿—æ­£å¸¸è¾“å‡º

å…¨éƒ¨å®ŒæˆåŽï¼Œä½ çš„åª’ä½“ç®¡ç†å™¨å°±å·²ç»æˆåŠŸéƒ¨ç½²å¹¶é…ç½®ä¸ºå¸¸é©»æœåŠ¡äº†ï¼ðŸŽŠ
