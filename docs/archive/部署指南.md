# é£ç‰›OSéƒ¨ç½²æŒ‡å—

## ğŸ“¦ å‡†å¤‡æ–‡ä»¶

éœ€è¦ä¸Šä¼ åˆ°é£ç‰›OSçš„æ–‡ä»¶ï¼š
- `app.py` - åç«¯æœåŠ¡å™¨
- `index.html` - å‰ç«¯é¡µé¢

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### æ–¹æ³•ä¸€ï¼šSSHéƒ¨ç½²ï¼ˆæ¨èï¼‰

#### 1. è¿æ¥åˆ°é£ç‰›OS
```bash
ssh root@ä½ çš„NAS_IP
# ä¾‹å¦‚ï¼šssh root@192.168.1.100
# é»˜è®¤å¯†ç é€šå¸¸æ˜¯ä½ è®¾ç½®çš„ç®¡ç†å‘˜å¯†ç 
```

#### 2. åˆ›å»ºé¡¹ç›®ç›®å½•
```bash
mkdir -p /root/media-manager
cd /root/media-manager
```

#### 3. ä¸Šä¼ æ–‡ä»¶
åœ¨ä½ çš„ç”µè„‘ä¸Šï¼Œä½¿ç”¨SCPä¸Šä¼ æ–‡ä»¶ï¼š
```bash
# Windows PowerShell æˆ– CMD
scp app.py root@ä½ çš„NAS_IP:/root/media-manager/
scp index.html root@ä½ çš„NAS_IP:/root/media-manager/

# æˆ–è€…ä½¿ç”¨WinSCPç­‰å›¾å½¢åŒ–å·¥å…·ä¸Šä¼ 
```

#### 4. æ£€æŸ¥Pythonç‰ˆæœ¬
```bash
python3 --version
# åº”è¯¥æ˜¾ç¤º Python 3.x.x
```

#### 5. å¯åŠ¨æœåŠ¡
```bash
cd /root/media-manager
python3 app.py
```

ä½ åº”è¯¥çœ‹åˆ°ï¼š
```
==================================================
ğŸ“ åª’ä½“å’Œå­—å¹•æ–‡ä»¶ç®¡ç†å™¨ V1
==================================================
æœåŠ¡å™¨è¿è¡Œåœ¨: http://localhost:8090
å±€åŸŸç½‘è®¿é—®: http://ä½ çš„NAS_IP:8090
æ‰«æè·¯å¾„: /vol02/1000-1-b23abde7/å¾…æ•´ç†
æŒ‰ Ctrl+C åœæ­¢æœåŠ¡å™¨
==================================================
```

#### 6. è®¿é—®Webç•Œé¢
åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š
```
http://ä½ çš„NAS_IP:8090
```

---

### æ–¹æ³•äºŒï¼šåå°è¿è¡Œï¼ˆæ¨èç”¨äºé•¿æœŸè¿è¡Œï¼‰

#### 1. ä½¿ç”¨nohupåå°è¿è¡Œ
```bash
cd /root/media-manager
nohup python3 app.py > media-manager.log 2>&1 &
```

#### 2. æŸ¥çœ‹æ—¥å¿—
```bash
tail -f /root/media-manager/media-manager.log
```

#### 3. æŸ¥çœ‹è¿›ç¨‹
```bash
ps aux | grep app.py
```

#### 4. åœæ­¢æœåŠ¡
```bash
pkill -f app.py
```

---

### æ–¹æ³•ä¸‰ï¼šä½¿ç”¨systemdæœåŠ¡ï¼ˆæœ€æ¨èï¼‰

#### 1. åˆ›å»ºæœåŠ¡æ–‡ä»¶
```bash
nano /etc/systemd/system/media-manager.service
```

#### 2. æ·»åŠ ä»¥ä¸‹å†…å®¹
```ini
[Unit]
Description=Media Manager Service
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/root/media-manager
ExecStart=/usr/bin/python3 /root/media-manager/app.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

#### 3. å¯ç”¨å¹¶å¯åŠ¨æœåŠ¡
```bash
# é‡è½½systemdé…ç½®
systemctl daemon-reload

# å¯åŠ¨æœåŠ¡
systemctl start media-manager

# è®¾ç½®å¼€æœºè‡ªå¯
systemctl enable media-manager

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
systemctl status media-manager

# æŸ¥çœ‹æ—¥å¿—
journalctl -u media-manager -f
```

#### 4. æœåŠ¡ç®¡ç†å‘½ä»¤
```bash
# å¯åŠ¨æœåŠ¡
systemctl start media-manager

# åœæ­¢æœåŠ¡
systemctl stop media-manager

# é‡å¯æœåŠ¡
systemctl restart media-manager

# æŸ¥çœ‹çŠ¶æ€
systemctl status media-manager

# ç¦ç”¨å¼€æœºè‡ªå¯
systemctl disable media-manager
```

---

## ğŸ”§ æ•…éšœæ’é™¤

### é—®é¢˜1ï¼šç«¯å£è¢«å ç”¨
```bash
# æŸ¥çœ‹8090ç«¯å£æ˜¯å¦è¢«å ç”¨
netstat -tulpn | grep 8090

# æˆ–ä½¿ç”¨
lsof -i :8090

# å¦‚æœè¢«å ç”¨ï¼Œå¯ä»¥ä¿®æ”¹app.pyä¸­çš„PORTå˜é‡
```

### é—®é¢˜2ï¼šæƒé™ä¸è¶³
```bash
# ç¡®ä¿æœ‰æƒé™è®¿é—®æ‰«æè·¯å¾„
ls -la /vol02/1000-1-b23abde7/å¾…æ•´ç†

# å¦‚æœæ²¡æœ‰æƒé™ï¼Œæ·»åŠ æƒé™
chmod 755 /vol02/1000-1-b23abde7/å¾…æ•´ç†
```

### é—®é¢˜3ï¼šPythonç‰ˆæœ¬é—®é¢˜
```bash
# æ£€æŸ¥Pythonç‰ˆæœ¬
python3 --version

# å¦‚æœç‰ˆæœ¬å¤ªä½ï¼ŒDebian 12åº”è¯¥è‡ªå¸¦Python 3.11+
```

### é—®é¢˜4ï¼šæ— æ³•è®¿é—®Webç•Œé¢
```bash
# æ£€æŸ¥é˜²ç«å¢™
iptables -L -n | grep 8090

# å¦‚æœéœ€è¦å¼€æ”¾ç«¯å£ï¼ˆé£ç‰›OSé€šå¸¸ä¸éœ€è¦ï¼‰
iptables -A INPUT -p tcp --dport 8090 -j ACCEPT
```

### é—®é¢˜5ï¼šç½‘ç›˜æŒ‚è½½é—®é¢˜
```bash
# æ£€æŸ¥ç½‘ç›˜æ˜¯å¦æ­£å¸¸æŒ‚è½½
ls -la /vol02/1000-1-b23abde7/

# æ£€æŸ¥æŒ‚è½½ç‚¹
mount | grep vol02
```

---

## ğŸ“± ä½¿ç”¨æ–¹æ³•

1. åœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š`http://ä½ çš„NAS_IP:8090`
2. ç‚¹å‡»"ğŸš€ å¼€å§‹æ™ºèƒ½é‡å‘½å"æŒ‰é’®
3. ç­‰å¾…æ‰«æå’Œé‡å‘½åå®Œæˆ
4. æŸ¥çœ‹é‡å‘½åæ—¥å¿—

---

## ğŸ”„ æ›´æ–°ç¨‹åº

```bash
# åœæ­¢æœåŠ¡
systemctl stop media-manager
# æˆ–
pkill -f app.py

# ä¸Šä¼ æ–°çš„æ–‡ä»¶è¦†ç›–æ—§æ–‡ä»¶
scp app.py root@ä½ çš„NAS_IP:/root/media-manager/
scp index.html root@ä½ çš„NAS_IP:/root/media-manager/

# é‡å¯æœåŠ¡
systemctl start media-manager
# æˆ–
cd /root/media-manager && nohup python3 app.py > media-manager.log 2>&1 &
```

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **å¤‡ä»½é‡è¦æ–‡ä»¶**ï¼šé‡å‘½åæ“ä½œä¸å¯é€†ï¼Œå»ºè®®å…ˆå¤‡ä»½
2. **ç½‘ç»œç¨³å®š**ï¼š115ç½‘ç›˜æ“ä½œéœ€è¦ç¨³å®šçš„ç½‘ç»œè¿æ¥
3. **è€å¿ƒç­‰å¾…**ï¼šç½‘ç›˜æ“ä½œè¾ƒæ…¢ï¼Œå¤§é‡æ–‡ä»¶å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´
4. **å®šæœŸæ£€æŸ¥**ï¼šå»ºè®®å®šæœŸæŸ¥çœ‹æ—¥å¿—ï¼Œç¡®ä¿æœåŠ¡æ­£å¸¸è¿è¡Œ

---

## ğŸ¯ å¿«é€Ÿå‘½ä»¤å‚è€ƒ

```bash
# ä¸€é”®éƒ¨ç½²ï¼ˆå¤åˆ¶ç²˜è´´æ‰§è¡Œï¼‰
mkdir -p /root/media-manager && cd /root/media-manager

# å¯åŠ¨æœåŠ¡
python3 app.py

# åå°è¿è¡Œ
nohup python3 app.py > media-manager.log 2>&1 &

# æŸ¥çœ‹æ—¥å¿—
tail -f media-manager.log

# åœæ­¢æœåŠ¡
pkill -f app.py

# æŸ¥çœ‹è¿›ç¨‹
ps aux | grep app.py
```

---

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. æ—¥å¿—æ–‡ä»¶ï¼š`/root/media-manager/media-manager.log`
2. ç³»ç»Ÿæ—¥å¿—ï¼š`journalctl -u media-manager -f`
3. Pythoné”™è¯¯ï¼šç›´æ¥è¿è¡Œ `python3 app.py` æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
