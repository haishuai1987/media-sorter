# è®¾ç½®åŠŸèƒ½è¯´æ˜Ž

## åŠŸèƒ½æ¦‚è¿°

æ–°å¢ž"è®¾ç½®"æŒ‰é’®ï¼Œå…è®¸ç”¨æˆ·é…ç½®è‡ªå·±çš„TMDB API Keyã€è±†ç“£Cookieå’Œä»£ç†è®¾ç½®ï¼Œé¿å…å¤šç”¨æˆ·å…±äº«å¯¼è‡´çš„APIé™åˆ¶å’Œé£ŽæŽ§é—®é¢˜ã€‚

---

## ç•Œé¢å¸ƒå±€

### æŒ‰é’®ç»„åˆ
```
[ðŸš€ ä¸€é”®æ•´ç†å…¥åº“]  [ðŸ“Š æ•´ç†è¯¦æƒ…]  [âš™ï¸ è®¾ç½®]
```

- **ä¸€é”®æ•´ç†å…¥åº“**ï¼šå¯åŠ¨å¤„ç†æµç¨‹ï¼ˆç´«è‰²ï¼‰
- **æ•´ç†è¯¦æƒ…**ï¼šæŸ¥çœ‹å®žæ—¶è¿›åº¦ï¼ˆç»¿è‰²ï¼‰
- **è®¾ç½®**ï¼šé…ç½®APIå’Œä»£ç†ï¼ˆæ©™è‰²ï¼‰

---

## è®¾ç½®é¡¹è¯´æ˜Ž

### ðŸŽ¬ TMDBé…ç½®

#### 1. API Key
- **ç”¨é€”**ï¼šè®¿é—®TMDBæ•°æ®åº“èŽ·å–ç”µå½±/å‰§é›†ä¿¡æ¯
- **èŽ·å–æ–¹æ³•**ï¼š
  1. è®¿é—® https://www.themoviedb.org/
  2. æ³¨å†Œ/ç™»å½•è´¦å·
  3. è¿›å…¥ Settings â†’ API
  4. ç”³è¯·API Keyï¼ˆå…è´¹ï¼‰
  5. å¤åˆ¶API Keyåˆ°è®¾ç½®ä¸­

#### 2. ä»£ç†åœ°å€
- **æ ¼å¼**ï¼š
  - HTTP: `http://192.168.1.1:7890`
  - HTTPS: `https://192.168.1.1:7890`
  - SOCKS5: `socks5://192.168.1.1:1080`
- **ç”¨é€”**ï¼šè®¿é—®TMDBï¼ˆå›½å†…å¯èƒ½éœ€è¦ï¼‰
- **å¯é€‰**ï¼šç•™ç©ºåˆ™ä¸ä½¿ç”¨ä»£ç†

#### 3. ä»£ç†ç±»åž‹
- **HTTP/HTTPS**ï¼šå¸¸è§çš„HTTPä»£ç†
- **SOCKS5**ï¼šæ›´åº•å±‚çš„ä»£ç†åè®®

### ðŸŽ­ è±†ç“£é…ç½®

#### 1. Cookie
- **ç”¨é€”**ï¼šè®¿é—®è±†ç“£èŽ·å–ä¸­æ–‡æ ‡é¢˜å’Œè¯„åˆ†
- **èŽ·å–æ–¹æ³•**ï¼š
  1. æµè§ˆå™¨ç™»å½• https://movie.douban.com/
  2. æŒ‰F12æ‰“å¼€å¼€å‘è€…å·¥å…·
  3. åˆ‡æ¢åˆ°Networkæ ‡ç­¾
  4. åˆ·æ–°é¡µé¢
  5. ç‚¹å‡»ä»»æ„è¯·æ±‚
  6. åœ¨Headersä¸­æ‰¾åˆ°Cookie
  7. å¤åˆ¶å®Œæ•´Cookieåˆ°è®¾ç½®ä¸­

**æ³¨æ„**ï¼šè±†ç“£åœ¨å›½å†…å¯ä»¥ç›´æŽ¥è®¿é—®ï¼Œä¸éœ€è¦ä»£ç†

---

## ä½¿ç”¨åœºæ™¯

### åœºæ™¯1: ä¸ªäººä½¿ç”¨
```
ç”¨æˆ·æ“ä½œï¼š
1. ç‚¹å‡»"è®¾ç½®"æŒ‰é’®
2. è¾“å…¥è‡ªå·±çš„TMDB API Key
3. è¾“å…¥è‡ªå·±çš„è±†ç“£Cookie
4. é…ç½®ä»£ç†ï¼ˆå¦‚éœ€è¦ï¼‰
5. ä¿å­˜è®¾ç½®

ä¼˜åŠ¿ï¼š
- ä½¿ç”¨è‡ªå·±çš„APIé…é¢
- é¿å…è¢«é£ŽæŽ§
- ç‹¬ç«‹çš„è®¿é—®è®°å½•
```

### åœºæ™¯2: åˆ†äº«ç»™æœ‹å‹
```
åˆ†äº«è€…ï¼š
1. åˆ†äº«ç¨‹åºæ–‡ä»¶
2. å‘ŠçŸ¥æœ‹å‹éœ€è¦è‡ªå·±é…ç½®

ä½¿ç”¨è€…ï¼š
1. å®‰è£…ç¨‹åº
2. ç‚¹å‡»"è®¾ç½®"
3. é…ç½®è‡ªå·±çš„API Keyå’ŒCookie
4. å¼€å§‹ä½¿ç”¨

ä¼˜åŠ¿ï¼š
- ä¸ä¼šæ¶ˆè€—åˆ†äº«è€…çš„APIé…é¢
- æ¯ä¸ªäººç‹¬ç«‹é…ç½®
- é¿å…å…±äº«å¯¼è‡´çš„é™åˆ¶
```

### åœºæ™¯3: å¤šè®¾å¤‡ä½¿ç”¨
```
ç”¨æˆ·æ“ä½œï¼š
1. åœ¨è®¾å¤‡Aé…ç½®è®¾ç½®
2. åœ¨è®¾å¤‡Bé‡æ–°é…ç½®
3. æ¯ä¸ªè®¾å¤‡ç‹¬ç«‹é…ç½®

ä¼˜åŠ¿ï¼š
- é…ç½®ä¿å­˜åœ¨æœ¬åœ°
- ä¸åŒè®¾å¤‡å¯ä»¥ç”¨ä¸åŒé…ç½®
- çµæ´»æ€§é«˜
```

---

## é…ç½®æ–‡ä»¶

### å­˜å‚¨ä½ç½®
```
~/.media-renamer/config.json
```

- **Linux/Mac**: `/home/username/.media-renamer/config.json`
- **Windows**: `C:\Users\username\.media-renamer\config.json`

### æ–‡ä»¶æ ¼å¼
```json
{
  "tmdb_api_key": "your-api-key",
  "tmdb_proxy": "http://192.168.1.1:7890",
  "tmdb_proxy_type": "http",
  "douban_cookie": "your-cookie"
}
```

### æ‰‹åŠ¨ç¼–è¾‘
ä¹Ÿå¯ä»¥ç›´æŽ¥ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š
```bash
# ç¼–è¾‘é…ç½®
nano ~/.media-renamer/config.json

# é‡å¯æœåŠ¡ç”Ÿæ•ˆ
python3 app.py
```

---

## ä»£ç†é…ç½®è¯¦è§£

### HTTP/HTTPSä»£ç†

#### å¸¸è§ä»£ç†è½¯ä»¶
- **Clash**: http://127.0.0.1:7890
- **V2Ray**: http://127.0.0.1:10809
- **Shadowsocks**: http://127.0.0.1:1080
- **Surge**: http://127.0.0.1:6152

#### é…ç½®ç¤ºä¾‹
```
ä»£ç†åœ°å€: http://127.0.0.1:7890
ä»£ç†ç±»åž‹: HTTP/HTTPS
```

### SOCKS5ä»£ç†

#### å¸¸è§ä»£ç†è½¯ä»¶
- **Shadowsocks**: socks5://127.0.0.1:1080
- **V2Ray**: socks5://127.0.0.1:10808
- **SSHéš§é“**: socks5://127.0.0.1:1080

#### é…ç½®ç¤ºä¾‹
```
ä»£ç†åœ°å€: socks5://127.0.0.1:1080
ä»£ç†ç±»åž‹: SOCKS5
```

### å±€åŸŸç½‘ä»£ç†

å¦‚æžœä»£ç†åœ¨å…¶ä»–è®¾å¤‡ä¸Šï¼š
```
ä»£ç†åœ°å€: http://192.168.1.100:7890
ä»£ç†ç±»åž‹: HTTP/HTTPS
```

---

## å®‰å…¨å»ºè®®

### 1. Cookieå®‰å…¨
- âš ï¸ CookieåŒ…å«ç™»å½•ä¿¡æ¯ï¼Œä¸è¦åˆ†äº«ç»™ä»–äºº
- âš ï¸ å®šæœŸæ›´æ–°Cookieï¼ˆè±†ç“£ä¼šè¯è¿‡æœŸï¼‰
- âš ï¸ ä¸è¦åœ¨å…¬å…±ç”µè„‘ä¸Šä¿å­˜Cookie

### 2. API Keyå®‰å…¨
- âš ï¸ API Keyæ˜¯ä¸ªäººå‡­è¯ï¼Œä¸è¦å…¬å¼€
- âš ï¸ å¦‚æžœæ³„éœ²ï¼ŒåŠæ—¶åœ¨TMDBé‡æ–°ç”Ÿæˆ
- âš ï¸ æ³¨æ„APIä½¿ç”¨é…é¢

### 3. ä»£ç†å®‰å…¨
- âš ï¸ åªä½¿ç”¨å¯ä¿¡çš„ä»£ç†æœåŠ¡
- âš ï¸ æ³¨æ„ä»£ç†çš„éšç§æ”¿ç­–
- âš ï¸ é¿å…ä½¿ç”¨å…è´¹å…¬å…±ä»£ç†

---

## æ•…éšœæŽ’æŸ¥

### é—®é¢˜1: TMDBæ— æ³•è®¿é—®
```
æ£€æŸ¥é¡¹ï¼š
1. API Keyæ˜¯å¦æ­£ç¡®
2. ä»£ç†æ˜¯å¦æ­£å¸¸å·¥ä½œ
3. ä»£ç†åœ°å€æ ¼å¼æ˜¯å¦æ­£ç¡®
4. ç½‘ç»œè¿žæŽ¥æ˜¯å¦æ­£å¸¸

è§£å†³æ–¹æ³•ï¼š
- æµ‹è¯•ä»£ç†: curl -x http://proxy:port https://api.themoviedb.org/3
- æ£€æŸ¥API Key: ç™»å½•TMDBæŸ¥çœ‹
- æ›´æ¢ä»£ç†æœåŠ¡å™¨
```

### é—®é¢˜2: è±†ç“£æ— æ³•è®¿é—®
```
æ£€æŸ¥é¡¹ï¼š
1. Cookieæ˜¯å¦è¿‡æœŸ
2. Cookieæ ¼å¼æ˜¯å¦å®Œæ•´
3. æ˜¯å¦éœ€è¦ä»£ç†

è§£å†³æ–¹æ³•ï¼š
- é‡æ–°èŽ·å–Cookie
- æ£€æŸ¥Cookieå®Œæ•´æ€§
- å°è¯•æ·»åŠ ä»£ç†
```

### é—®é¢˜3: è®¾ç½®æ— æ³•ä¿å­˜
```
æ£€æŸ¥é¡¹ï¼š
1. é…ç½®ç›®å½•æƒé™
2. ç£ç›˜ç©ºé—´
3. æ–‡ä»¶ç³»ç»Ÿæƒé™

è§£å†³æ–¹æ³•ï¼š
- æ£€æŸ¥æƒé™: ls -la ~/.media-renamer/
- æ‰‹åŠ¨åˆ›å»ºç›®å½•: mkdir -p ~/.media-renamer
- ä¿®æ”¹æƒé™: chmod 755 ~/.media-renamer
```

### é—®é¢˜4: ä»£ç†ä¸ç”Ÿæ•ˆ
```
æ£€æŸ¥é¡¹ï¼š
1. ä»£ç†åœ°å€æ ¼å¼
2. ä»£ç†ç±»åž‹é€‰æ‹©
3. ä»£ç†æœåŠ¡æ˜¯å¦è¿è¡Œ

è§£å†³æ–¹æ³•ï¼š
- æ£€æŸ¥æ ¼å¼: http://host:port æˆ– socks5://host:port
- æµ‹è¯•ä»£ç†: curl -x proxy_url https://www.google.com
- é‡å¯ä»£ç†æœåŠ¡
```

---

## é«˜çº§é…ç½®

### ä½¿ç”¨çŽ¯å¢ƒå˜é‡
```bash
# è®¾ç½®çŽ¯å¢ƒå˜é‡
export TMDB_API_KEY="your-key"
export TMDB_PROXY="http://proxy:port"

# å¯åŠ¨ç¨‹åº
python3 app.py
```

### ä½¿ç”¨é…ç½®æ–‡ä»¶
```bash
# åˆ›å»ºé…ç½®
cat > ~/.media-renamer/config.json << EOF
{
  "tmdb_api_key": "your-key",
  "tmdb_proxy": "http://proxy:port"
}
EOF

# å¯åŠ¨ç¨‹åº
python3 app.py
```

### DockerçŽ¯å¢ƒ
```yaml
# docker-compose.yml
services:
  media-renamer:
    environment:
      - TMDB_API_KEY=your-key
      - TMDB_PROXY=http://proxy:port
    volumes:
      - ./config:/root/.media-renamer
```

---

## APIé…é¢è¯´æ˜Ž

### TMDB API
- **å…è´¹é…é¢**: æ¯å¤©40,000æ¬¡è¯·æ±‚
- **é€ŸçŽ‡é™åˆ¶**: æ¯10ç§’40æ¬¡è¯·æ±‚
- **å»ºè®®**: ä¸ªäººä½¿ç”¨å®Œå…¨è¶³å¤Ÿ

### è±†ç“£
- **æ— å®˜æ–¹API**: ä½¿ç”¨ç½‘é¡µçˆ¬å–
- **é€ŸçŽ‡é™åˆ¶**: å»ºè®®é—´éš”1-2ç§’
- **é£ŽæŽ§**: é¢‘ç¹è¯·æ±‚å¯èƒ½è¢«é™åˆ¶

---

## æœ€ä½³å®žè·µ

### 1. å®šæœŸæ›´æ–°
- æ¯æœˆæ›´æ–°ä¸€æ¬¡è±†ç“£Cookie
- æ£€æŸ¥TMDB API KeyçŠ¶æ€
- æ›´æ–°ä»£ç†é…ç½®

### 2. å¤‡ä»½é…ç½®
```bash
# å¤‡ä»½é…ç½®
cp ~/.media-renamer/config.json ~/config.backup.json

# æ¢å¤é…ç½®
cp ~/config.backup.json ~/.media-renamer/config.json
```

### 3. å¤šçŽ¯å¢ƒé…ç½®
```bash
# å¼€å‘çŽ¯å¢ƒ
cp config.dev.json ~/.media-renamer/config.json

# ç”Ÿäº§çŽ¯å¢ƒ
cp config.prod.json ~/.media-renamer/config.json
```

---

## æ€»ç»“

è®¾ç½®åŠŸèƒ½è®©æ¯ä¸ªç”¨æˆ·å¯ä»¥ï¼š

âœ… **ç‹¬ç«‹é…ç½®** - ä½¿ç”¨è‡ªå·±çš„API Keyå’ŒCookie
âœ… **çµæ´»ä»£ç†** - æ”¯æŒHTTPå’ŒSOCKS5ä»£ç†
âœ… **å®‰å…¨éš”ç¦»** - é¿å…å…±äº«å¯¼è‡´çš„é£ŽæŽ§
âœ… **ç®€å•æ˜“ç”¨** - å›¾å½¢ç•Œé¢é…ç½®
âœ… **æŒä¹…ä¿å­˜** - é…ç½®è‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°

çŽ°åœ¨ä½ å¯ä»¥æ”¾å¿ƒåœ°åˆ†äº«ç¨‹åºç»™æœ‹å‹ï¼Œæ¯ä¸ªäººä½¿ç”¨è‡ªå·±çš„é…ç½®ï¼Œäº’ä¸å½±å“ï¼ðŸŽ‰
