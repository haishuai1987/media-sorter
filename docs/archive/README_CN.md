# 媒体和字幕文件管理器

专为飞牛OS（Debian 12 + Linux 6.6.38）设计的NAS媒体文件管理工具。

## 功能特性

- 📁 扫描指定文件夹下的媒体和字幕文件
- 🎬 支持多种媒体格式：MP4, MKV, AVI, MOV, WMV, FLV, WebM, M4V
- 📝 支持多种字幕格式：SRT, ASS, SSA, SUB, VTT
- 🔍 文件类型筛选（全部/媒体/字幕）
- ✏️ 单个文件重命名
- 🔄 批量文件重命名（支持文本替换）
- 📊 显示文件大小和修改时间
- 🚀 纯Python实现，无需额外依赖

## 在飞牛OS上安装

1. SSH登录到飞牛OS系统

2. 进入工作目录并上传文件：
```bash
cd /path/to/your/directory
```

3. 启动服务器：
```bash
python3 app.py
```

4. 在浏览器中访问：
```
http://你的NAS_IP:8080
```

## 使用方法

### 基本操作
1. 输入要扫描的文件夹路径（例如：`/vol02/1000-1-b23abde7/待整理`）
2. 点击"扫描文件夹"按钮
3. 使用筛选按钮查看不同类型的文件
4. 点击"重命名"按钮修改单个文件名

### 批量重命名
1. 点击"批量工具"按钮展开批量操作面板
2. 在"查找文本"框输入要替换的内容
3. 在"替换为"框输入新内容
4. 点击"批量替换"按钮

**示例：**
- 查找：`S01` → 替换为：`第1季`
- 查找：`E` → 替换为：`集`
- 查找：`.chs` → 替换为：`.简体中文`

## 权限设置

如果遇到权限问题，请确保运行用户有读写目标文件夹的权限：

```bash
# 查看文件夹权限
ls -la /vol02/1000-1-b23abde7/待整理

# 如需修改权限（谨慎操作）
chmod 755 /vol02/1000-1-b23abde7/待整理
```

## 后台运行

使用 `nohup` 让服务在后台持续运行：

```bash
nohup python3 app.py > media-manager.log 2>&1 &
```

停止服务：
```bash
pkill -f app.py
```

## 端口配置

默认端口为 8080，可在 `app.py` 中修改 `PORT` 变量。

## 系统要求

- Python 3.7+（Debian 12 默认包含）
- 无需额外Python包
- 支持中文文件名

## 安全建议

- 建议仅在内网使用
- 如需外网访问，请配置防火墙和反向代理
- 定期备份重要文件

## 故障排除

**问题：无法访问服务**
- 检查防火墙是否开放8080端口
- 确认服务是否正常运行：`ps aux | grep app.py`

**问题：权限不足**
- 使用有足够权限的用户运行
- 检查目标文件夹的读写权限

**问题：中文乱码**
- 确保系统locale设置正确：`locale`
- 飞牛OS默认应该支持UTF-8
