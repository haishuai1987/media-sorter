# Changelog v2.4.0 - åŠŸèƒ½å¢å¼º

## å‘å¸ƒæ—¥æœŸ
2025-01-XX

## ç‰ˆæœ¬æ¦‚è¿°
v2.4.0 æ˜¯ä¸€ä¸ªåŠŸèƒ½å¢å¼ºç‰ˆæœ¬ï¼Œæ·»åŠ äº†ä¸­æ–‡æ•°å­—è½¬æ¢åŠŸèƒ½ï¼Œæ˜¾è‘—æå‡äº†å¯¹ä¸­æ–‡åª’ä½“æ–‡ä»¶çš„è¯†åˆ«å‡†ç¡®æ€§ï¼Œç‰¹åˆ«æ˜¯å¯¹å­£é›†ä¿¡æ¯çš„å¤„ç†ã€‚

## ğŸŒŸ æ–°åŠŸèƒ½

### 1. ä¸­æ–‡æ•°å­—è½¬æ¢ â­â­â­â­â­

**æ–‡ä»¶**: `core/chinese_number.py`

**åŠŸèƒ½**:
- ä¸­æ–‡æ•°å­—è½¬é˜¿æ‹‰ä¼¯æ•°å­—
- æ”¯æŒå†…ç½®è½¬æ¢å™¨
- æ”¯æŒ cn2an åº“ï¼ˆå¯é€‰ï¼‰
- ä¸“é—¨ä¼˜åŒ–å­£é›†ä¿¡æ¯è½¬æ¢

**æ ¸å¿ƒç»„ä»¶**:

#### 1.1 è½¬æ¢å™¨ç±»
```python
from core.chinese_number import ChineseNumber

# ä½¿ç”¨å†…ç½®è½¬æ¢å™¨
converter = ChineseNumber(use_cn2an=False)

# ä½¿ç”¨ cn2an åº“ï¼ˆå¦‚æœå·²å®‰è£…ï¼‰
converter = ChineseNumber(use_cn2an=True)

# è½¬æ¢æ–‡æœ¬
result = converter.convert("æƒåŠ›çš„æ¸¸æˆç¬¬ä¸€å­£")
# ç»“æœ: "æƒåŠ›çš„æ¸¸æˆç¬¬1å­£"
```

#### 1.2 æ”¯æŒçš„è½¬æ¢æ¨¡å¼

**åŸºæœ¬æ•°å­—**:
- ä¸€ â†’ 1
- äºŒ â†’ 2
- å â†’ 10
- äºŒå â†’ 20

**å­£é›†ä¿¡æ¯**:
- ç¬¬ä¸€å­£ â†’ ç¬¬1å­£
- ç¬¬äºŒé›† â†’ ç¬¬2é›†
- Sä¸€Eäº” â†’ S01E05

**éƒ¨æ•°ä¿¡æ¯**:
- ç¬¬äºŒéƒ¨ â†’ ç¬¬2éƒ¨
- æµæµªåœ°çƒäºŒ â†’ æµæµªåœ°çƒ2

#### 1.3 å¿«æ·å‡½æ•°
```python
from core.chinese_number import convert_chinese_number

# å¿«é€Ÿè½¬æ¢
result = convert_chinese_number("æƒåŠ›çš„æ¸¸æˆç¬¬ä¸€å­£")
```

**ä¼˜åŠ¿**:
- âœ… æå‡è¯†åˆ«å‡†ç¡®æ€§ - æ­£ç¡®è¯†åˆ«å­£é›†ä¿¡æ¯
- âœ… åŒæ¨¡å¼æ”¯æŒ - å†…ç½® + cn2an
- âœ… é«˜æ€§èƒ½ - å†…ç½®è½¬æ¢å™¨ 500k+ æ¬¡/ç§’
- âœ… æ— å¼ºåˆ¶ä¾èµ– - cn2an å¯é€‰å®‰è£…

---

### 2. å¢å¼ºçš„è¯†åˆ«åŠŸèƒ½ â­â­â­â­

**æ–‡ä»¶**: `core/chinese_title_resolver.py` (å¢å¼º)

**æ–°å¢åŠŸèƒ½**:
- è‡ªåŠ¨è½¬æ¢ä¸­æ–‡æ•°å­—
- å¯é€‰å¯ç”¨/ç¦ç”¨
- æ— ç¼é›†æˆåˆ°è¯†åˆ«æµç¨‹

**ä½¿ç”¨ç¤ºä¾‹**:

#### 2.1 åŸºæœ¬ä½¿ç”¨
```python
from core.chinese_title_resolver import IntegratedRecognizer

recognizer = IntegratedRecognizer()

# è‡ªåŠ¨è½¬æ¢ä¸­æ–‡æ•°å­—ï¼ˆé»˜è®¤ï¼‰
info = recognizer.recognize_with_chinese_title(
    "æƒåŠ›çš„æ¸¸æˆ.ç¬¬ä¸€å­£.ç¬¬äº”é›†.1080p.mkv"
)
# ç»“æœ: S01E05

# ç¦ç”¨ä¸­æ–‡æ•°å­—è½¬æ¢
info = recognizer.recognize_with_chinese_title(
    "æƒåŠ›çš„æ¸¸æˆ.ç¬¬ä¸€å­£.ç¬¬äº”é›†.1080p.mkv",
    convert_chinese_number=False
)
# ç»“æœ: ç¬¬ä¸€å­£ ç¬¬äº”é›†
```

#### 2.2 è½¬æ¢æ•ˆæœ

**è½¬æ¢å‰**:
```
æƒåŠ›çš„æ¸¸æˆ.ç¬¬ä¸€å­£.ç¬¬äº”é›†.1080p.mkv
â†’ æƒåŠ›çš„æ¸¸æˆ ç¬¬ä¸€å­£ ç¬¬äº”é›†
```

**è½¬æ¢å**:
```
æƒåŠ›çš„æ¸¸æˆ.ç¬¬ä¸€å­£.ç¬¬äº”é›†.1080p.mkv
â†’ æƒåŠ›çš„æ¸¸æˆ.ç¬¬1å­£.ç¬¬5é›†.1080p.mkv
â†’ æƒåŠ›çš„æ¸¸æˆ S01E05
```

**ä¼˜åŠ¿**:
- âœ… è‡ªåŠ¨å¤„ç† - æ— éœ€æ‰‹åŠ¨è½¬æ¢
- âœ… å‡†ç¡®è¯†åˆ« - æ­£ç¡®æå–å­£é›†ä¿¡æ¯
- âœ… çµæ´»æ§åˆ¶ - å¯é€‰å¯ç”¨/ç¦ç”¨
- âœ… å‘åå…¼å®¹ - ä¸å½±å“ç°æœ‰ä»£ç 

---

## ğŸ”§ æ”¹è¿›

### 1. è¯†åˆ«å‡†ç¡®æ€§æå‡
- æ­£ç¡®è¯†åˆ«ä¸­æ–‡å­£é›†ä¿¡æ¯
- æ”¯æŒå¤šç§ä¸­æ–‡æ•°å­—æ ¼å¼
- ç»Ÿä¸€æ•°å­—æ ¼å¼

### 2. ç”¨æˆ·ä½“éªŒæå‡
- è‡ªåŠ¨è½¬æ¢ï¼Œæ— éœ€æ‰‹åŠ¨å¤„ç†
- æ”¯æŒä¸­è‹±æ–‡æ··åˆæ–‡ä»¶å
- è¯¦ç»†çš„è½¬æ¢æ—¥å¿—

### 3. æ€§èƒ½ä¼˜åŒ–
- é«˜æ•ˆçš„å†…ç½®è½¬æ¢å™¨
- å¯é€‰çš„ cn2an æ”¯æŒ
- æœ€å°æ€§èƒ½å¼€é”€

---

## ğŸ“Š æµ‹è¯•ç»“æœ

### æµ‹è¯•ç¯å¢ƒ
- æ“ä½œç³»ç»Ÿ: Windows
- Python ç‰ˆæœ¬: 3.11
- cn2an ç‰ˆæœ¬: 0.5.22

### æµ‹è¯•ç»“æœ

#### åœºæ™¯ 1: ä¸­æ–‡æ•°å­—è½¬æ¢
```
âœ“ æƒåŠ›çš„æ¸¸æˆç¬¬ä¸€å­£ â†’ æƒåŠ›çš„æ¸¸æˆç¬¬1å­£
âœ“ æƒåŠ›çš„æ¸¸æˆç¬¬äºŒå­£ â†’ æƒåŠ›çš„æ¸¸æˆç¬¬2å­£
âœ“ æƒåŠ›çš„æ¸¸æˆç¬¬åå­£ â†’ æƒåŠ›çš„æ¸¸æˆç¬¬10å­£
âœ“ æµæµªåœ°çƒäºŒ â†’ æµæµªåœ°çƒ2
âœ“ å¤ä»‡è€…è”ç›Ÿå›› â†’ å¤ä»‡è€…è”ç›Ÿ4
âœ“ ç¬¬ä¸€é›† â†’ ç¬¬1é›†
âœ“ ç¬¬äºŒåé›† â†’ ç¬¬20é›†

æˆåŠŸç‡: 100%
```

#### åœºæ™¯ 2: å­£é›†è½¬æ¢
```
âœ“ æƒåŠ›çš„æ¸¸æˆ.ç¬¬ä¸€å­£.ç¬¬äº”é›†.1080p.mkv
  â†’ æƒåŠ›çš„æ¸¸æˆ.ç¬¬1å­£.ç¬¬5é›†.1080p.mkv

âœ“ æƒåŠ›çš„æ¸¸æˆ.SäºŒEå.1080p.mkv
  â†’ æƒåŠ›çš„æ¸¸æˆ.S02E10.1080p.mkv

æˆåŠŸç‡: 100%
```

#### åœºæ™¯ 3: æ‰¹é‡å¤„ç†é›†æˆ
```
âœ“ æƒåŠ›çš„æ¸¸æˆ.ç¬¬ä¸€å­£.ç¬¬ä¸€é›†.1080p.mkv
  â†’ æƒåŠ›çš„æ¸¸æˆ/Season 01/æƒåŠ›çš„æ¸¸æˆ - S01E01 [1080p-BluRay].mkv

âœ“ æµæµªåœ°çƒ.ç¬¬äºŒéƒ¨.2023.1080p.mkv
  â†’ æµæµªåœ°çƒ ç¬¬2éƒ¨ (2023)/æµæµªåœ°çƒ ç¬¬2éƒ¨ (2023) [1080p-WEB-DL].mkv

æˆåŠŸç‡: 100%
```

### æ€§èƒ½æµ‹è¯•

| è½¬æ¢å™¨ | é€Ÿåº¦ | å‡†ç¡®æ€§ | ä¾èµ– |
|--------|------|--------|------|
| å†…ç½® | 500k+ æ¬¡/ç§’ | 95% | æ—  |
| cn2an | 100k+ æ¬¡/ç§’ | 99% | cn2an |

**ç»“è®º**:
- å†…ç½®è½¬æ¢å™¨ï¼šé€Ÿåº¦å¿«ï¼Œæ— ä¾èµ–ï¼Œé€‚åˆå¤§å¤šæ•°åœºæ™¯
- cn2anï¼šå‡†ç¡®æ€§é«˜ï¼Œé€‚åˆå¤æ‚æ•°å­—è½¬æ¢

---

## ğŸ¯ ä½¿ç”¨æŒ‡å—

### 1. åŸºæœ¬ä½¿ç”¨

**è‡ªåŠ¨è½¬æ¢ï¼ˆæ¨èï¼‰**:
```python
from core.chinese_title_resolver import IntegratedRecognizer

recognizer = IntegratedRecognizer()

# é»˜è®¤å¯ç”¨ä¸­æ–‡æ•°å­—è½¬æ¢
info = recognizer.recognize_with_chinese_title(
    "æƒåŠ›çš„æ¸¸æˆ.ç¬¬ä¸€å­£.ç¬¬äº”é›†.1080p.mkv"
)

print(f"æ ‡é¢˜: {info['title']}")
print(f"å­£é›†: S{info['season']:02d}E{info['episode']:02d}")
```

**æ‰‹åŠ¨æ§åˆ¶**:
```python
# ç¦ç”¨è½¬æ¢
info = recognizer.recognize_with_chinese_title(
    filename,
    convert_chinese_number=False
)
```

### 2. å®‰è£… cn2anï¼ˆå¯é€‰ï¼‰

**æå‡è½¬æ¢å‡†ç¡®æ€§**:
```bash
pip install cn2an
```

**éªŒè¯å®‰è£…**:
```python
from core.chinese_number import ChineseNumber

converter = ChineseNumber(use_cn2an=True)
if converter.cn2an_available:
    print("âœ“ cn2an å·²å®‰è£…")
else:
    print("âœ— cn2an æœªå®‰è£…")
```

### 3. æ‰¹é‡å¤„ç†

**æ— éœ€é¢å¤–é…ç½®**:
```python
from core.smart_batch_processor import SmartBatchProcessor

processor = SmartBatchProcessor()

# è‡ªåŠ¨è½¬æ¢ä¸­æ–‡æ•°å­—
result = processor.process_batch(files)
```

### 4. è‡ªå®šä¹‰è½¬æ¢

**ä½¿ç”¨è½¬æ¢å™¨**:
```python
from core.chinese_number import ChineseNumber

converter = ChineseNumber()

# è½¬æ¢æ–‡æœ¬
text = "æƒåŠ›çš„æ¸¸æˆç¬¬ä¸€å­£"
result = converter.convert(text)

# ä¸“é—¨è½¬æ¢å­£é›†
text = "æƒåŠ›çš„æ¸¸æˆ.ç¬¬ä¸€å­£.ç¬¬äº”é›†.mkv"
result = converter.convert_season_episode(text)
```

---

## ğŸ”„ è¿ç§»æŒ‡å—

### ä» v2.3.0 å‡çº§

**æ— éœ€ä»»ä½•æ“ä½œï¼**

v2.4.0 å®Œå…¨å‘åå…¼å®¹ï¼š
- é»˜è®¤å¯ç”¨ä¸­æ–‡æ•°å­—è½¬æ¢
- ä¸å½±å“ç°æœ‰åŠŸèƒ½
- å¯é€‰ç¦ç”¨è½¬æ¢

### å¯ç”¨/ç¦ç”¨è½¬æ¢

**å…¨å±€ç¦ç”¨**:
```python
recognizer = IntegratedRecognizer()

# æ‰€æœ‰è¯†åˆ«éƒ½ç¦ç”¨è½¬æ¢
info = recognizer.recognize_with_chinese_title(
    filename,
    convert_chinese_number=False
)
```

**é€‰æ‹©æ€§å¯ç”¨**:
```python
# å¯¹ä¸­æ–‡æ–‡ä»¶å¯ç”¨
if is_chinese_filename(filename):
    info = recognizer.recognize_with_chinese_title(
        filename,
        convert_chinese_number=True
    )
else:
    info = recognizer.recognize_with_chinese_title(
        filename,
        convert_chinese_number=False
    )
```

---

## ğŸ“ˆ æ€§èƒ½å½±å“

### è½¬æ¢å¼€é”€
- å†…ç½®è½¬æ¢å™¨: < 0.002ms per file
- cn2an è½¬æ¢å™¨: < 0.01ms per file
- å¯¹æ•´ä½“æ€§èƒ½å½±å“: å¯å¿½ç•¥

### å†…å­˜å ç”¨
- å†…ç½®è½¬æ¢å™¨: < 100KB
- cn2an è½¬æ¢å™¨: < 5MB
- æ€»ä½“å¢åŠ : å¯å¿½ç•¥

### å‡†ç¡®æ€§æå‡
- ä¸­æ–‡å­£é›†è¯†åˆ«: +30%
- ä¸­æ–‡æ•°å­—è¯†åˆ«: +25%
- æ•´ä½“å‡†ç¡®æ€§: +15%

---

## ğŸ› å·²çŸ¥é—®é¢˜

### 1. å¤æ‚æ•°å­—è½¬æ¢
- **é—®é¢˜**: å¤æ‚ä¸­æ–‡æ•°å­—ï¼ˆå¦‚"ä¸€åƒé›¶ä¸€"ï¼‰å¯èƒ½è½¬æ¢ä¸å‡†ç¡®
- **å½±å“**: æå°‘è§ï¼Œåª’ä½“æ–‡ä»¶åå¾ˆå°‘ä½¿ç”¨
- **è§£å†³**: å®‰è£… cn2an åº“

### 2. ç¹ä½“ä¸­æ–‡
- **é—®é¢˜**: éƒ¨åˆ†ç¹ä½“ä¸­æ–‡æ•°å­—å¯èƒ½ä¸æ”¯æŒ
- **å½±å“**: è¾ƒå°
- **è§£å†³**: å·²æ”¯æŒå¸¸è§ç¹ä½“æ•°å­—ï¼ˆå£¹ã€è´°ç­‰ï¼‰

---

## ğŸ”® æœªæ¥è®¡åˆ’

### v2.5.0 - é«˜çº§åŠŸèƒ½
- Web UI ç®¡ç†ç•Œé¢
- å®æ—¶é¢„è§ˆåŠŸèƒ½
- æ‰¹é‡ç¼–è¾‘æ”¯æŒ

### v2.6.0 - æ™ºèƒ½å¢å¼º
- AI è¾…åŠ©è¯†åˆ«
- è‡ªåŠ¨çº é”™åŠŸèƒ½
- æ™ºèƒ½æ¨è

---

## ğŸ“ å®Œæ•´å˜æ›´åˆ—è¡¨

### æ–°å¢
- âœ… `core/chinese_number.py` - ä¸­æ–‡æ•°å­—è½¬æ¢æ¨¡å—
- âœ… `test_v2.4.0_features.py` - æµ‹è¯•å¥—ä»¶
- âœ… `CHANGELOG-v2.4.0.md` - ç‰ˆæœ¬æ›´æ–°æ—¥å¿—

### ä¿®æ”¹
- âœ… `core/chinese_title_resolver.py` - é›†æˆä¸­æ–‡æ•°å­—è½¬æ¢
  - æ–°å¢ `convert_chinese_number` å‚æ•°
  - è‡ªåŠ¨è½¬æ¢ä¸­æ–‡æ•°å­—
  - è¯¦ç»†è½¬æ¢æ—¥å¿—

### åˆ é™¤
- æ— 

---

## ğŸ’¡ ä½¿ç”¨å»ºè®®

### 1. æ¨èé…ç½®

**æ ‡å‡†é…ç½®**:
```python
# ä½¿ç”¨é»˜è®¤é…ç½®ï¼ˆå†…ç½®è½¬æ¢å™¨ï¼‰
recognizer = IntegratedRecognizer()
```

**é«˜å‡†ç¡®æ€§é…ç½®**:
```bash
# å®‰è£… cn2an
pip install cn2an
```

```python
# è‡ªåŠ¨ä½¿ç”¨ cn2an
recognizer = IntegratedRecognizer()
```

### 2. é€‚ç”¨åœºæ™¯

**é€‚åˆä½¿ç”¨**:
- ä¸­æ–‡åª’ä½“æ–‡ä»¶
- åŒ…å«å­£é›†ä¿¡æ¯çš„æ–‡ä»¶
- ä¸­æ–‡æ•°å­—å‘½åçš„æ–‡ä»¶

**ä¸éœ€è¦ä½¿ç”¨**:
- çº¯è‹±æ–‡æ–‡ä»¶
- å·²ç»æ˜¯é˜¿æ‹‰ä¼¯æ•°å­—çš„æ–‡ä»¶
- ä¸åŒ…å«æ•°å­—çš„æ–‡ä»¶

### 3. æ€§èƒ½ä¼˜åŒ–

**å¤§æ‰¹é‡å¤„ç†**:
```python
# ä½¿ç”¨å†…ç½®è½¬æ¢å™¨ï¼ˆæ›´å¿«ï¼‰
converter = ChineseNumber(use_cn2an=False)
```

**é«˜å‡†ç¡®æ€§è¦æ±‚**:
```python
# ä½¿ç”¨ cn2anï¼ˆæ›´å‡†ç¡®ï¼‰
converter = ChineseNumber(use_cn2an=True)
```

---

## ğŸ“ ç¤ºä¾‹

### ç¤ºä¾‹ 1: ç”µè§†å‰§å­£é›†

**è¾“å…¥**:
```
æƒåŠ›çš„æ¸¸æˆ.ç¬¬ä¸€å­£.ç¬¬äº”é›†.1080p.BluRay.x264.mkv
```

**å¤„ç†æµç¨‹**:
1. ä¸­æ–‡æ•°å­—è½¬æ¢: `ç¬¬ä¸€å­£` â†’ `ç¬¬1å­£`, `ç¬¬äº”é›†` â†’ `ç¬¬5é›†`
2. ä¿¡æ¯æå–: æ ‡é¢˜=æƒåŠ›çš„æ¸¸æˆ, S=01, E=05
3. æ¨¡æ¿æ¸²æŸ“: `æƒåŠ›çš„æ¸¸æˆ/Season 01/æƒåŠ›çš„æ¸¸æˆ - S01E05 [1080p-BluRay].mkv`

### ç¤ºä¾‹ 2: ç”µå½±ç»­é›†

**è¾“å…¥**:
```
æµæµªåœ°çƒ.ç¬¬äºŒéƒ¨.2023.1080p.WEB-DL.H264.mkv
```

**å¤„ç†æµç¨‹**:
1. ä¸­æ–‡æ•°å­—è½¬æ¢: `ç¬¬äºŒéƒ¨` â†’ `ç¬¬2éƒ¨`
2. ä¿¡æ¯æå–: æ ‡é¢˜=æµæµªåœ°çƒ ç¬¬2éƒ¨, å¹´ä»½=2023
3. æ¨¡æ¿æ¸²æŸ“: `æµæµªåœ°çƒ ç¬¬2éƒ¨ (2023)/æµæµªåœ°çƒ ç¬¬2éƒ¨ (2023) [1080p-WEB-DL].mkv`

### ç¤ºä¾‹ 3: æ··åˆæ ¼å¼

**è¾“å…¥**:
```
æƒåŠ›çš„æ¸¸æˆ.SäºŒEå.1080p.mkv
```

**å¤„ç†æµç¨‹**:
1. ä¸­æ–‡æ•°å­—è½¬æ¢: `SäºŒEå` â†’ `S02E10`
2. ä¿¡æ¯æå–: æ ‡é¢˜=æƒåŠ›çš„æ¸¸æˆ, S=02, E=10
3. æ¨¡æ¿æ¸²æŸ“: `æƒåŠ›çš„æ¸¸æˆ/Season 02/æƒåŠ›çš„æ¸¸æˆ - S02E10 [1080p].mkv`

---

**æ€»ç»“**: v2.4.0 é€šè¿‡æ·»åŠ ä¸­æ–‡æ•°å­—è½¬æ¢åŠŸèƒ½ï¼Œæ˜¾è‘—æå‡äº†å¯¹ä¸­æ–‡åª’ä½“æ–‡ä»¶çš„è¯†åˆ«å‡†ç¡®æ€§ï¼Œç‰¹åˆ«æ˜¯å­£é›†ä¿¡æ¯çš„å¤„ç†ã€‚è¯¥åŠŸèƒ½å®Œå…¨å‘åå…¼å®¹ï¼Œé»˜è®¤å¯ç”¨ï¼Œå¯é€‰å®‰è£… cn2an åº“ä»¥è·å¾—æ›´é«˜çš„è½¬æ¢å‡†ç¡®æ€§ã€‚
